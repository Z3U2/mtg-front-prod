webpackJsonp([1],{D9tW:function(t,e){},FAaQ:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("7+uW"),n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("svg",{staticClass:"spinner",attrs:{width:"65px",height:"65px",viewBox:"0 0 66 66"}},[e("circle",{staticClass:"path",attrs:{fill:"none","stroke-width":"6","stroke-linecap":"round",cx:"33",cy:"33",r:"30"}})])},staticRenderFns:[]},r={name:"app",components:{Loading:i("VU/8")({name:"Loading",data:function(){return{}}},n,!1,function(t){i("RzBN")},"data-v-2de5ad3d",null).exports},created:function(){this.fetchData()},data:function(){return{isSearching:!1,search:"",drawer:!1,loading:!1,allCategories:null,searchList:[]}},watch:{isSearching:function(t){var e=this;this.$refs.toolbar.isScolling=!t,t?this.$nextTick(function(){e.$refs.search.focus()}):this.search=null},search:function(t){var e=this;t?this.query(t).then(function(t){t.json().then(function(t){e.searchList=t})}):this.searchList=[]}},methods:{fetchData:function(){var t=this;window.scrollTo(0,0),this.$emit("startLoading");this.getData("").then(function(e){e.json().then(function(e){t.allCategories=e,t.$emit("stopLoading")})}).catch(function(e){t.err=e})},getData:function(t){return fetch(this.$url2+t,this.$urlSettings)},draw:function(){this.drawer=!this.drawer},query:function(t){return fetch(this.$url1+"search?name="+t,this.$urlSettings)},clear:function(t){this.searchList=[],this.isSearching=!1}}},s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("v-app",[i("v-navigation-drawer",{attrs:{id:"v-navigation-drawer",fixed:"",app:"","disable-route-watcher":""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[i("v-list",{attrs:{dense:""}},t._l(t.allCategories,function(e){return i("v-list-tile",{key:e.id,attrs:{to:{name:"category",params:{id:e.id}}},on:{click:function(t){}}},[i("v-list-tile-content",[i("v-list-tile-title",[t._v(t._s(e.category))])],1)],1)}))],1),t._v(" "),i("v-toolbar",{attrs:{id:"v-toolbar",color:"indigo",dark:"",fixed:"",app:""}},[i("v-toolbar-side-icon",{on:{click:function(e){e.stopPropagation(),t.draw(e)}}}),t._v(" "),i("v-btn",{attrs:{icon:"",large:""},on:{click:function(e){t.isSearching=!0}}},[i("v-icon",[t._v("search")])],1),t._v(" "),i("router-link",{attrs:{tag:"v-toolbar-title",to:"/"}},[i("span",{attrs:{id:"title"}},[t._v("Movie Trailer Gallery")])]),t._v(" "),i("v-spacer")],1),t._v(" "),i("v-toolbar",{ref:"toolbar",attrs:{id:"searchbar",color:"indigo",dark:"",fixed:"",app:"","manual-scroll":!t.isSearching,flat:""}},[i("v-btn",{attrs:{icon:"",dark:"",large:""},on:{click:function(e){t.isSearching=!1}}},[i("v-icon",[t._v("arrow_back")])],1),t._v(" "),i("v-text-field",{key:"search",ref:"search",attrs:{autocomplete:"off",placeholder:"Search","prepend-icon":"search",id:"search",clearable:"","single-line":"",solo:"",light:""},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1),t._v(" "),i("v-content",[t.loading?i("v-container",[i("Loading")],1):t._e(),t._v(" "),i("v-container",[0!=t.searchList.length?i("v-list",{staticClass:"elevation-1",attrs:{"two-line":""}},[t._l(t.searchList,function(e,a){return[i("v-list-tile",{key:e.id,attrs:{to:{name:"movie",params:{id:e.id}}},on:{click:t.clear}},[i("v-list-tile-avatar",[i("img",{attrs:{src:e.image}})]),t._v(" "),i("v-list-tile-content",[i("v-list-tile-title",{domProps:{textContent:t._s(e.name)}})],1)],1),t._v(" "),a<t.searchList.length?i("v-divider"):t._e()]}),t._v(" "),i("v-list-tile",{staticClass:"blue white--text",attrs:{to:{name:"name",params:{name:this.search}}},on:{click:t.clear}},[i("v-list-tile-title",[i("div",[i("h3",{staticStyle:{"text-align":"center"}},[t._v(" VIEW ALL")])])])],1)],2):t._e()],1),t._v(" "),i("router-view",{on:{startLoading:function(e){t.loading=!0},stopLoading:function(e){t.loading=!1}}})],1)],1)],1)},staticRenderFns:[]},o=i("VU/8")(r,s,!1,function(t){i("uCJi")},null,null).exports,c=i("/ocq"),l=i("3EgV"),u=i.n(l),h=i("gRE1"),d=i.n(h),v=i("//Fk"),p=i.n(v),m={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-container",[e("v-layout",[e("v-flex",[e("v-card",{attrs:{hover:""}},[e("v-card-media",{attrs:{src:this.movie.image,height:"500px"}}),this._v(" "),e("v-card-title",{attrs:{"primary-title":""}},[e("v-btn",{staticClass:"indigo--text",attrs:{absolute:"",dark:"",fab:"",bottom:"",right:"",color:"blue",to:"/movie/"+this.movie.id}},[e("v-icon",[this._v("play_arrow")])],1),this._v(" "),e("div",{staticStyle:{margin:"auto"}},[e("h3",{staticClass:"headline mb-0"},[this._v(this._s(this.movie.name))]),this._v(" "),e("p",[this._v(this._s(this.movie.synopsis))])])],1)],1)],1)],1)],1)},staticRenderFns:[]},f={name:"Home",components:{Movie:i("VU/8")({name:"Movie",props:["movie"],data:function(){return{}},created:function(){}},m,!1,function(t){i("D9tW")},"data-v-33d3de12",null).exports},data:function(){return{movies:null,page:parseInt(this.$route.params.id),pageNumber:15,err:null}},created:function(){this.fetchData()},watch:{$route:"fetchData",page:"goTo"},methods:{fetchData:function(){var t=this;window.scrollTo(0,0),this.$emit("startLoading");var e=this.getData("pageNumber"),i=this.getData("page/"+this.$route.params.id);p.a.all([e,i]).then(function(e){e[0].json().then(function(e){t.pageNumber=Math.ceil(d()(e)[0]/9)}),e[1].json().then(function(e){t.movies=e,t.$emit("stopLoading")})}).catch(function(e){t.err=e})},getData:function(t){return fetch(this.$url1+t,this.$urlSettings)},goTo:function(){this.$router.push({name:"page",params:{id:this.page}})}}},g={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[this.movies?i("v-container",[i("v-layout",{attrs:{row:"",wrap:""}},t._l(t.movies,function(t){return i("v-flex",{key:t.id,attrs:{md4:"",sm6:"",xs12:""}},[i("router-link",{attrs:{tag:"div",to:{name:"movie",params:{id:t.id}}}},[i("Movie",{attrs:{movie:t}})],1)],1)})),t._v(" "),i("v-btn",{staticClass:"white--text elevation-5",attrs:{fixed:"",dark:"",fab:"",bottom:"",right:"",color:"teal",to:"/new"}},[i("v-icon",[t._v("add")])],1)],1):t._e(),t._v(" "),i("v-container",[i("v-layout",{attrs:{"justify-center":""}},[i("v-flex",[i("v-card",[i("v-card-text",[i("v-pagination",{staticClass:"pink--text",attrs:{color:"indigo",length:t.pageNumber},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}})],1)],1)],1)],1)],1)],1)},staticRenderFns:[]},_=i("VU/8")(f,g,!1,null,null,null).exports,b={name:"MovieDetail",data:function(){return{settings:{method:"GET",headers:{Accept:"application/json"}},movie:null}},created:function(){this.fetchData()},watch:{$route:"fetchData"},methods:{fetchData:function(){var t=this;window.scrollTo(0,0),this.$emit("startLoading");this.getData(this.$route.params.id).then(function(e){e.json().then(function(e){t.movie=e,t.$emit("stopLoading")})}).catch(function(e){t.err=e})},getData:function(t){return fetch(this.$url1+t,this.$urlSettings)}}},y={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.movie?i("v-container",[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{lg4:"",md12:""}},[i("v-container",[i("v-card",{attrs:{color:"blue-grey darken-2"}},[i("v-card-media",{attrs:{src:t.movie.image,height:"500px",contain:""}})],1)],1)],1),t._v(" "),i("v-flex",{attrs:{lg8:"",md12:""}},[i("div",{staticClass:"mydiv"},[i("v-card",{attrs:{height:"100%"}},[i("v-card-title",{attrs:{"primary-title":""}},[i("v-btn",{staticClass:"indigo--text",attrs:{absolute:"",dark:"",fab:"",top:"",right:"",color:"blue"},on:{click:function(e){t.$router.push("/")}}},[i("v-icon",[t._v("close")])],1),t._v(" "),i("h1",{staticStyle:{margin:"auto"}},[t._v(t._s(t.movie.name))])],1),t._v(" "),i("v-card-text",[t._v("\n        "+t._s(t.movie.synopsis)+"\n      ")]),t._v(" "),i("v-card-text",{staticStyle:{height:"360px"}},[i("iframe",{staticClass:"myPad",attrs:{src:t.movie.trailer}})])],1)],1)])],1)],1):t._e()},staticRenderFns:[]},w=i("VU/8")(b,y,!1,function(t){i("FAaQ")},"data-v-c7da5c58",null).exports,k=i("mvHQ"),x=i.n(k),$={name:"New",props:["allCategoriesReady"],data:function(){return{valid:!0,title:"",titleRules:[function(t){return!!t||"Title is required"}],synopsis:"",synopsisRules:[function(t){return!!t||"Synopsis is required"}],link:"",linkRules:[function(t){return!!t||"Link is required"},function(t){return/https:\/\/www.youtube.com\/embed\/[A-Za-z0-9]*/.test(t)||"Not a valid YouTube link"}],image:"",imageRules:[function(t){return!!t||"Image is required"},function(t){return/(((https:\/\/)|(http:\/\/)|(www))[-a-zA-Z0-9@:%_+.~#?&/=,]+)\.(jpg|jpeg|gif|png|bmp|tiff|tga|svg)/.test(t)||"Not a valid Image"}],categories:[],allCategories:null,categoryRules:[function(t){return!!t.length||"Category is required"}]}},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;window.scrollTo(0,0),this.$emit("startLoading");this.getData("").then(function(e){e.json().then(function(e){t.allCategories=e,t.$emit("stopLoading")})}).catch(function(e){t.err=e})},getData:function(t){return fetch(this.$url2+t,this.$urlSettings)},submit:function(){var t=this;if(this.$refs.form.validate()){this.$emit("startLoading");var e={title:this.title,synopsis:this.synopsis,trailer:this.link,categories:this.allCategories.filter(function(e){return t.categories.includes(e.category)}),image:this.image},i=new Headers;i.append("Accept","application/json"),i.append("Content-Type","application/json"),console.log(e),console.log(i),fetch("http://localhost:3000/new",{method:"POST",body:x()(e),headers:i}).then(function(){t.$emit("stopLoading"),t.$router.push("/")}).catch(function(e){t.$emit("stopLoading"),console.log(x()(e)),t.err=e.message})}}}},L={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return this.allCategories?i("v-container",[i("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[i("v-text-field",{attrs:{label:"Title",rules:t.titleRules,required:""},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),t._v(" "),i("v-text-field",{attrs:{label:"Synopsis",rules:t.synopsisRules,required:""},model:{value:t.synopsis,callback:function(e){t.synopsis=e},expression:"synopsis"}}),t._v(" "),i("v-text-field",{attrs:{label:"Trailer Link",rules:t.linkRules,required:""},model:{value:t.link,callback:function(e){t.link=e},expression:"link"}}),t._v(" "),i("v-text-field",{attrs:{label:"Image",rules:t.imageRules,required:""},model:{value:t.image,callback:function(e){t.image=e},expression:"image"}}),t._v(" "),i("v-select",{attrs:{label:"Categories",items:t.allCategories.map(function(t){return t.category}),multiple:"",hint:"Pick the categories","persistent-hint":"",rules:t.categoryRules,required:""},model:{value:t.categories,callback:function(e){t.categories=e},expression:"categories"}}),t._v(" "),i("v-btn",{attrs:{disabled:!t.valid},on:{click:t.submit}},[t._v("\n      submit\n    ")])],1)],1):t._e()},staticRenderFns:[]},D=i("VU/8")($,L,!1,null,null,null).exports,C={name:"Query",data:function(){return{resultList:[]}},watch:{$route:"fetchData"},created:function(){this.fetchData()},methods:{fetchData:function(){var t=this;"name"===this.$route.name?this.getData("name="+this.$route.params.name).then(function(e){e.json().then(function(e){t.resultList=e})}):"category"===this.$route.name&&this.getData("category="+this.$route.params.id).then(function(e){e.json().then(function(e){t.resultList=e})})},getData:function(t){return fetch(this.$url1+"search?"+t+"&all=1",this.$urlSettings)}}},S={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-container",[0!=t.resultList.length?i("v-list",{attrs:{"two-line":""}},[t._l(t.resultList,function(e,a){return[i("v-list-tile",{key:e.id,attrs:{to:{name:"movie",params:{id:e.id}}}},[i("v-list-tile-avatar",[i("img",{attrs:{src:e.image}})]),t._v(" "),i("v-list-tile-content",[i("v-list-tile-title",{domProps:{textContent:t._s(e.name)}})],1)],1),t._v(" "),a+1<t.resultList.length?i("v-divider"):t._e()]})],2):t._e()],1)},staticRenderFns:[]},R=i("VU/8")(C,S,!1,function(t){i("QO5J")},"data-v-e2cfdb44",null).exports;a.a.use(c.a),a.a.use(u.a);var T=new c.a({routes:[{path:"/",redirect:"/page/1"},{path:"/page/:id",name:"page",component:_},{path:"/movie/:id",name:"movie",component:w},{path:"/new",name:"new",component:D},{path:"/category/:id",name:"category",component:R},{path:"/search/:name",name:"name",component:R}]});a.a.config.productionTip=!1,a.a.prototype.$url1="https://radiant-beach-89364.herokuapp.com/movies/",a.a.prototype.$url2="https://radiant-beach-89364.herokuapp.com/categories/",a.a.prototype.$urlSettings={method:"GET",headers:{Accept:"application/json"}},new a.a({el:"#app",router:T,template:"<App/>",components:{App:o}})},QO5J:function(t,e){},RzBN:function(t,e){},uCJi:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.808b65b74f2ceb012b79.js.map